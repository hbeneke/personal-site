---
import BaseLayout from "@layouts/base-layout.astro";
import { siteConfig } from "@site-config";
import { getAllProjects } from "@utils/portfolio";

const sortedProjects = await getAllProjects(true, true);
---

<BaseLayout
  title={`Portfolio Â· ${siteConfig.siteTitle}`}
  description={`Welcome to my portfolio! I'm a senior ${siteConfig.jobTitle} specializing in modern web technologies. Explore my projects, skills, and professional experience in software development.`}
>
  <section>
    <header class="mb-8">
      <h1 class="text-xl font-medium secondary mb-6 border-b border-gray-200 dark:border-gray-700 pb-2">
        Portfolio
      </h1>
    </header>

    <div class="space-y-4">
      {
        sortedProjects.map((project) => (
          <div class="py-4">
            <div class="flex justify-between items-center gap-28">
              <div class="flex-1 min-w-0">
                <h3 class="font-semibold text-primary hover:secondary-hovered cursor-pointer secondary">
                  <span class="inline-block w-4">
                    {project.featured && <span class="mr-1">ðŸ“Œ</span>}
                  </span>
                  <a
                    href={project.github}
                    target="_blank"
                    rel="noopener noreferrer"
                    class="hover:underline"
                  >
                    {project.title.toLowerCase().replace(/\s+/g, "-")}
                  </a>
                </h3>
                <p class="text-xs text-gray-400 mt-1 leading-relaxed ml-6">
                  {project.description}
                </p>
                <div class="flex flex-wrap gap-1.5 mt-2 ml-6">
                  {project.technologies.map((tech: string) => (
                    <span class="text-[10px] px-2 py-0.2 rounded-full bg-gray-800/50 text-gray-300 border border-gray-600/50">
                      {tech}
                    </span>
                  ))}
                </div>
              </div>

              <div class="text-right flex-shrink-0">
                <div class="text-xs text-gray-500">Last Updated</div>
                <time class="text-xs text-gray-400 font-mono">
                  {new Date(project.date).toLocaleDateString(
                    siteConfig.locale,
                    {
                      year: "numeric",
                      month: "short",
                      day: "numeric",
                    }
                  )}
                </time>
              </div>
            </div>
          </div>
        ))
      }
    </div>
  </section>
</BaseLayout>
