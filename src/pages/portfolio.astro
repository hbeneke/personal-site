---
import BaseLayout from "@layouts/base-layout.astro";
import { siteConfig } from "@site-config";
import { getAllProjects } from "@utils/portfolio";

const sortedProjects = await getAllProjects(true);
---

<BaseLayout
  title={`Portfolio Â· ${siteConfig.siteTitle}`}
  description={`Welcome to my portfolio! I'm a senior ${siteConfig.jobTitle} specializing in modern web technologies. Explore my projects, skills, and professional experience in software development.`}
>
  <section>
    <header class="mb-8">
      <h2 class="font-semibold text-2xl secondary">Repository List</h2>
    </header>

    <div class="space-y-4">
      {
        sortedProjects.map((project) => (
          <div class="px-4 py-4 hover:bg-gray-800/40 transition-colors group rounded-lg">
            <div class="flex justify-between items-start gap-8">
              <div class="flex-1 min-w-0">
                <h3 class="font-semibold text-primary hover:underline cursor-pointer">
                  {project.title.toLowerCase().replace(/\s+/g, "-")}
                </h3>
                <p class="text-xs text-gray-400 mt-1 leading-relaxed">
                  {project.description}
                </p>
                <div class="flex flex-wrap gap-1.5 mt-2">
                  {project.technologies.map((tech: string) => (
                    <span class="text-[10px] px-2 py-0.5 rounded-full bg-gray-800/50 text-gray-300 border border-gray-600/50">
                      {tech}
                    </span>
                  ))}
                </div>
              </div>

              <div class="text-right flex-shrink-0">
                <div class="text-xs text-gray-500">Last Updated</div>
                <time class="text-xs text-gray-400 font-mono">
                  {new Date(project.date).toLocaleDateString(
                    siteConfig.locale,
                    {
                      year: "2-digit",
                      month: "short",
                      day: "numeric",
                    }
                  )}
                </time>
              </div>
            </div>
          </div>
        ))
      }
    </div>
  </section>
</BaseLayout>
