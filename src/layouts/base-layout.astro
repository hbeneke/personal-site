---
import "@styles/global.css";
import Footer from "@components/site-footer.astro";
import Header from "@components/site-header.astro";
import Notes from "@components/recent-notes.astro";
import SchemaMarkup from "@components/schema-markup.astro";
import SEO from "@components/seo.astro";

const {
  title,
  description,
  image,
  article,
  publishDate,
  modifiedDate,
  canonicalUrl,
  schemaType = "WebSite",
  noindex,
  nofollow,
  author,
  tags,
} = Astro.props;
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />

    <SEO
      title={title}
      description={description}
      image={image}
      article={article}
      publishDate={publishDate}
      modifiedDate={modifiedDate}
      canonicalUrl={canonicalUrl}
      noindex={noindex}
      nofollow={nofollow}
      author={author}
      tags={tags}
    />

    <SchemaMarkup
      type={schemaType}
      title={title}
      description={description}
      url={canonicalUrl}
      image={image}
      publishDate={publishDate}
      modifiedDate={modifiedDate}
    />

    <script is:inline>
      const theme =
        localStorage.getItem("theme") ||
        (window.matchMedia("(prefers-color-scheme: dark)").matches
          ? "dark"
          : "light");
      if (theme === "dark") document.documentElement.classList.add("dark");
    </script>
  </head>
  <body
    class="flex mx-auto min-w-[350px] font-jetbrains min-h-screen max-w-3xl flex-col bg-bgColor px-4 pt-16 text-sm font-normal text-textColor antialiased sm:px-8"
  >
    <Header />
    <main id="main" class="flex-grow">
      <slot />
    </main>
    <Footer />
    <Notes />
    {
      import.meta.env.PROD && (
        <script>
          import('@vercel/speed-insights/astro');
          import('@vercel/analytics/astro');
        </script>
      )
    }
  </body>
</html>
