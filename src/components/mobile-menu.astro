---
import SideMenuIcon from "@icons/menu.svg";
import { menuLinks } from "@site-config";

const url = new URL(Astro.request.url);
---

<mobile-menu class="sm:hidden">
  <button
    class="flex w-9 h-9 ml-2 rounded-md hover:text-green-400 transition-colors duration-200 items-center justify-center"
    type="button"
    aria-label="Toggle mobile menu"
    aria-expanded="false"
  >
    <SideMenuIcon />
  </button>

  <nav
    class="absolute left-0 w-full backdrop-blur-xl z-50 opacity-0 invisible transition-all duration-300 ease-in-out"
    aria-label="Mobile menu"
    style="top: var(--header-height, 0px);"
  >
    <div class="py-4 px-4 text-right">
      {
        menuLinks.map((link) => (
          <a
            aria-current={url.pathname === link.path ? "page" : false}
            aria-label={`Navigate to ${link.title} page`}
            class="block px-4 py-3 text-base hover:bg-[rgb(var(--foreground))]/10 active:bg-[rgb(var(--primary))]/5 active:scale-95 transition-all duration-150 rounded-md mb-2 mt-5"
            data-astro-prefetch
            href={link.path}
          >
            <span
              class={
                url.pathname === link.path
                  ? "primary font-semibold"
                  : "text-[rgb(var(--foreground))]"
              }
            >
              {link.title}
            </span>
          </a>
        ))
      }
    </div>
  </nav>
</mobile-menu>

<script>
  import("@scripts/mobile-menu");
</script>
